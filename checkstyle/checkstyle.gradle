apply plugin: 'checkstyle'

// Settings
ext {
    checkstylerules  = "${project.rootDir}/advisor/rules/checkstyle-rules.xml"
    checkstyleOutput = "${project.rootDir}/advisor/reports/checkstyle/checkstyle-report.html"
}

// Settings
checkstyle {
    configProperties = ['checkstyle.cache.file': rootProject.file('build/checkstyle.cache')]
}

// Tasks
afterEvaluate { project ->
    task checkstyle(type: Checkstyle) {
        dependsOn 'setup'

        // Description
        description = 'Run Checkstyle'
        group       = 'verification'

        // Paths
        classpath  = files()
        configFile = new File(checkstylerules)

        // Sources
        source  'src'
        include '**/*.java'
        exclude '**/gen/**'
        exclude '**/BuildConfig.java'
        exclude '**/R.java'

        reports{
            xml {
                enabled = false
            }

            html {
                enabled     = true
                destination = checkstyleOutput
            }
        }
    }
}
